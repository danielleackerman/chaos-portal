---
import PortalLayout from '../../layouts/PortalLayout.astro';
import ExpandingCards from '../../components/ui/ExpandingCards.astro';
import FlipCard from '../../components/ui/FlipCard.astro';
import Tabs from '../../components/ui/Tabs.astro';
const base = import.meta.env.BASE_URL;


const dimensionCards = [
  {
    id: 'd5-surface',
    label: 'D5',
    title: 'Surface / Expressive',
    description: 'What you directly see and hear — dialogue, visuals, music, editing patterns.',
    accentToken: 'var(--dim-5)',
  },
  {
    id: 'd4-structural',
    label: 'D4',
    title: 'Structural',
    description: 'How the story is organized — act structure, scene sequences, plot architecture.',
    accentToken: 'var(--dim-4)',
  },
  {
    id: 'd3-cognitive',
    label: 'D3',
    title: 'Cognitive / Thematic',
    description: 'Ideas the story explores — themes, questions, intellectual arguments.',
    accentToken: 'var(--dim-3)',
  },
  {
    id: 'd2-psychological',
    label: 'D2',
    title: 'Psychological',
    description: 'Character interiority — motivation, desire, fear, transformation arcs.',
    accentToken: 'var(--dim-2)',
  },
  {
    id: 'd1-archetypal',
    label: 'D1',
    title: 'Archetypal / Mythic',
    description: 'Universal patterns — hero, shadow, threshold guardians, collective resonance.',
    accentToken: 'var(--dim-1)',
  },
  {
    id: 'd0-core',
    label: 'D0',
    title: 'Core / Existential',
    description: 'Foundational meaning — why the story exists, what it ultimately says about being alive.',
    accentToken: 'var(--dim-0)',
  },
];

const positionCards = [
  {
    id: 'pos-12',
    label: '12:00',
    title: 'Origin / Ordinary World',
    description: 'Calm baseline — the world before the story acts on it.',
    accentToken: 'var(--pos-12)',
  },
  {
    id: 'pos-1',
    label: '1:00',
    title: 'Catalyst / Inciting Incident',
    description: 'First disruption — something shifts the equilibrium.',
    accentToken: 'var(--pos-1)',
  },
  {
    id: 'pos-3',
    label: '3:00',
    title: 'First Threshold',
    description: 'Commitment — the protagonist crosses into the unknown.',
    accentToken: 'var(--pos-3)',
  },
  {
    id: 'pos-6',
    label: '6:00',
    title: 'Midpoint Revelation',
    description: 'Maximum intensity — core truth exposed, stakes transform, no turning back.',
    accentToken: 'var(--pos-6)',
  },
  {
    id: 'pos-9',
    label: '9:00',
    title: 'Crisis / Dark Night',
    description: 'Tension easing — aftermath of the midpoint, reorientation begins.',
    accentToken: 'var(--pos-9)',
  },
  {
    id: 'pos-12-return',
    label: '12:00',
    title: 'Resolution / Return',
    description: 'New equilibrium — the arc completes, calm restored at a new level.',
    accentToken: 'var(--pos-12)',
  },
];
---

<PortalLayout title="Style Guide" currentPage="styleguide">

  <nav class="breadcrumb">
    <a href={`${base}/`}>Home</a>
    <span class="sep">›</span>
    <strong>Style Guide</strong>
  </nav>

  <div class="page-hero page-hero--neutral">
    <div class="eyebrow eyebrow--neutral">REFERENCE</div>
    <h1>Style Guide</h1>
    <p class="subtitle">Living inventory of every component in the Chaos Portal design system (v4.0)</p>
  </div>

  <nav class="toc-grid">
    <div class="toc-grid__label">On This Page</div>
    <div class="toc-grid__items">
      <a href="#rules" class="toc-grid__link">Implementation Rules</a>
      <a href="#colors" class="toc-grid__link">Color System</a>
      <a href="#typography" class="toc-grid__link">Typography</a>
      <a href="#notation" class="toc-grid__link">Coordinate Notation</a>
      <a href="#spacing" class="toc-grid__link">Layout &amp; Spacing</a>
      <a href="#rail-visuals" class="toc-grid__link">Rail Visuals</a>
      <a href="#overview-block" class="toc-grid__link">Overview Block</a>
      <a href="#progressive-disclosure" class="toc-grid__link">Progressive Disclosure</a>
      <a href="#heroes" class="toc-grid__link">Page Heroes</a>
      <a href="#callouts" class="toc-grid__link">Callouts</a>
      <a href="#cards" class="toc-grid__link">Cards</a>
      <a href="#tables" class="toc-grid__link">Tables</a>
      <a href="#tokens-tags" class="toc-grid__link">Tokens &amp; Tags</a>
      <a href="#lists" class="toc-grid__link">Lists &amp; Checklists</a>
      <a href="#containers" class="toc-grid__link">Structural Containers</a>
      <a href="#navigation" class="toc-grid__link">Navigation</a>
    </div>
  </nav>

  <div class="compass-content">

    <!-- ==================== IMPLEMENTATION RULES ==================== -->
    <div class="section" id="rules">
      <h2>Implementation Rules</h2>
      <p>Canonical constraints that govern all pages. These are not suggestions — they are the system.</p>

      <h3>Color Application Rules</h3>
      <div class="checklist">
        <div><strong>Signal Amber (#F59E0B):</strong> Horizontal Axis ONLY — timeline, position, progression, structure</div>
        <div><strong>Clarity Teal (#14B8A6):</strong> Vertical Axis ONLY — depth, dimensions (D0–D5), layers</div>
        <div><strong>Info Blue (#3B82F6):</strong> System callouts, general UI elements NOT axis-associated</div>
        <div><strong>Warn Red (#EF4444):</strong> Caution states, deprecation notices</div>
        <div><strong>Accent Purple (#8B5CF6):</strong> Cross-domain bridges, Creativity Engine elements</div>
        <div><strong>UI Colors:</strong> Links, buttons, navigation ONLY — never for semantic content</div>
      </div>

      <h3>Typography Rules</h3>
      <div class="checklist">
        <div>H1 uses DM Serif Display at 3.2em — page titles and hero headings only</div>
        <div>Body uses system sans stack (Helvetica Neue / system-ui) at 1rem, line-height 1.65</div>
        <div>H4 uses Georgia italic for editorial / explanatory subheadings</div>
        <div>Monospace (ui-monospace) for coordinates, tokens, and technical notation only</div>
        <div>Never use pure black (#000) for text — use var(--text) which adapts to theme</div>
      </div>

      <h3>Spacing Rules</h3>
      <p>All spacing follows an 8px-based scale. Maintain consistent rhythm throughout pages.</p>
    </div>

    <hr/>

    <!-- ==================== COLORS ==================== -->
    <div class="section" id="colors">
      <h2>Color System</h2>

      <h3>Semantic Colors</h3>
      <p>These colors carry meaning tied to the coordinate system axes. They are not decorative.</p>

      <div class="sg-color-grid">
        <div class="sg-color-card">
          <div class="sg-swatch" style="background: #F59E0B; color: white;">SIGNAL AMBER</div>
          <div class="sg-color-info">
            <strong>Signal Amber</strong>
            <code>#F59E0B</code>
            <span>Horizontal Axis — story timeline, position</span>
          </div>
        </div>
        <div class="sg-color-card">
          <div class="sg-swatch" style="background: #14B8A6; color: white;">CLARITY TEAL</div>
          <div class="sg-color-info">
            <strong>Clarity Teal</strong>
            <code>#14B8A6</code>
            <span>Vertical Axis — story depth, dimensions</span>
          </div>
        </div>
      </div>

      <h3>Information Colors</h3>
      <p>System-level signals unrelated to narrative axes:</p>
<h3>Information Colors</h3>
      <p>System-level signals unrelated to narrative axes:</p>

      <div class="sg-color-grid">
        <div class="sg-color-card">
          <div class="sg-swatch" style="background: #6B7280; color: white;">EDITORIAL GRAY</div>
          <div class="sg-color-info">
            <strong>Editorial Gray</strong>
            <code>#6B7280</code>
            <span>Neutral callouts, example blocks, gray FlipCard accent</span>
          </div>
        </div>
        <div class="sg-color-card">
          <div class="sg-swatch" style="background: #3B82F6; color: white;">INFO BLUE</div>
          <div class="sg-color-info">
            <strong>Info Blue</strong>
            <code>#3B82F6</code>
            <span>Links, focus rings, component outlines — functional UI only, not editorial</span>
          </div>
        </div>
        <div class="sg-color-card">
          <div class="sg-swatch" style="background: #EF4444; color: white;">WARN RED</div>
          <div class="sg-color-info">
            <strong>Warn Red</strong>
            <code>#EF4444</code>
            <span>Constraint notices, do-not-do markers, critical caution</span>
          </div>
        </div>
        <div class="sg-color-card">
          <div class="sg-swatch" style="background: #8B5CF6; color: white;">ACCENT PURPLE</div>
          <div class="sg-color-info">
            <strong>Accent Purple</strong>
            <code>#8B5CF6</code>
            <span>Pagefind search UI only — not a design option</span>
          </div>
        </div>
      </div>
      <div class="sg-color-grid">
        <div class="sg-color-card">
          <div class="sg-swatch" style="background: #3B82F6; color: white;">INFO BLUE</div>
          <div class="sg-color-info">
            <strong>Info Blue</strong>
            <code>#3B82F6</code>
            <span>System callouts, general UI</span>
          </div>
        </div>
        <div class="sg-color-card">
          <div class="sg-swatch" style="background: #EF4444; color: white;">WARN RED</div>
          <div class="sg-color-info">
            <strong>Warn Red</strong>
            <code>#EF4444</code>
            <span>Caution, deprecation notices</span>
          </div>
        </div>
        <div class="sg-color-card">
          <div class="sg-swatch" style="background: #8B5CF6; color: white;">ACCENT PURPLE</div>
          <div class="sg-color-info">
            <strong>Accent Purple</strong>
            <code>#8B5CF6</code>
            <span>Bridges, cross-domain elements</span>
          </div>
        </div>
        <div class="sg-color-card">
          <div class="sg-swatch" style="background: #10B981; color: white;">ACCENT GREEN</div>
          <div class="sg-color-info">
            <strong>Accent Green</strong>
            <code>#10B981</code>
            <span>Examples, positive states</span>
          </div>
        </div>
      </div>

      <h3>Surface Tokens (Theme-Adaptive)</h3>
      <p>These neutrals flip between light and dark mode via CSS variables:</p>

      <div class="sg-color-grid">
        <div class="sg-color-card">
          <div class="sg-swatch" style="background:var(--bg); color:var(--text); border:1px solid var(--border);">PAGE BG</div>
          <div class="sg-color-info">
            <strong>--bg</strong>
            <code>var(--bg)</code>
            <span>Page background</span>
          </div>
        </div>
        <div class="sg-color-card">
          <div class="sg-swatch" style="background:var(--surface); color:var(--text); border:1px solid var(--border);">SURFACE</div>
          <div class="sg-color-info">
            <strong>--surface</strong>
            <code>var(--surface)</code>
            <span>Card / container background</span>
          </div>
        </div>
        <div class="sg-color-card">
          <div class="sg-swatch" style="background:var(--surface-elevated); color:var(--text); border:1px solid var(--border);">ELEVATED</div>
          <div class="sg-color-info">
            <strong>--surface-elevated</strong>
            <code>var(--surface-elevated)</code>
            <span>Callouts, elevated panels</span>
          </div>
        </div>
        <div class="sg-color-card">
          <div class="sg-swatch" style="background:var(--surface-inset); color:var(--text); border:1px solid var(--border);">INSET</div>
          <div class="sg-color-info">
            <strong>--surface-inset</strong>
            <code>var(--surface-inset)</code>
            <span>Recessed areas</span>
          </div>
        </div>
      </div>

      <h3>Dimension Depth Scale (Teal)</h3>
      <p>The 6 vertical dimensions use teal at increasing opacity to communicate analytical depth. Surface (D5) is lightest; Core (D0) is deepest. Same hue, no new colors.</p>
      <div class="sg-depth-strip">
        <div class="sg-depth-swatch" style="background:var(--dim-5);">D5</div>
        <div class="sg-depth-swatch" style="background:var(--dim-4);">D4</div>
        <div class="sg-depth-swatch" style="background:var(--dim-3);">D3</div>
        <div class="sg-depth-swatch" style="background:var(--dim-2);">D2</div>
        <div class="sg-depth-swatch" style="background:var(--dim-1);">D1</div>
        <div class="sg-depth-swatch" style="background:var(--dim-0);">D0</div>
      </div>
      <div class="sg-type-details">
        <strong>Variables:</strong> <code>--dim-5</code> through <code>--dim-0</code> &nbsp;·&nbsp;
        <strong>Usage:</strong> Accent borders/stripes only &nbsp;·&nbsp;
        <strong>Rule:</strong> Never as full card background fills.
      </div>

      <h3>Position Intensity Scale (Amber)</h3>
      <p>Clock positions use amber at varying intensity. Origin (12:00) is calm; Midpoint (6:00) is maximum intensity. Intensity eases from 9:00 back to 12:00.</p>
      <div class="sg-depth-strip">
        <div class="sg-depth-swatch" style="background:var(--pos-12);">12:00</div>
        <div class="sg-depth-swatch" style="background:var(--pos-1);">1:00</div>
        <div class="sg-depth-swatch" style="background:var(--pos-3);">3:00</div>
        <div class="sg-depth-swatch" style="background:var(--pos-6);">6:00</div>
        <div class="sg-depth-swatch" style="background:var(--pos-9);">9:00</div>
        <div class="sg-depth-swatch" style="background:var(--pos-12);">12:00</div>
      </div>
      <div class="sg-type-details">
        <strong>Variables:</strong> <code>--pos-12</code> through <code>--pos-9</code> &nbsp;·&nbsp;
        <strong>Usage:</strong> Accent borders/stripes only &nbsp;·&nbsp;
        <strong>Pattern:</strong> Intensity peaks at 6:00 then eases back to 12:00.
      </div>

      <h3>Gradient Usage</h3>
      <p>Gradients flow from Horizontal (amber) to Vertical (teal), symbolizing the coordinate system:</p>
      <div class="sg-gradient-demo">Horizontal → Vertical Gradient</div>
      <p><em>Used for: hero left borders, section dividers, axis transitions</em></p>
    </div>

    <hr/>

    <!-- ==================== TYPOGRAPHY ==================== -->
    <div class="section" id="typography">
      <h2>Typography</h2>

      <h3>Type Scale</h3>
      <p>A clear hierarchical scale ensures readability and visual rhythm across dense analytical content.</p>

      <div class="sg-type-specimen">
        <h1 style="margin:0;">Display Heading (H1)</h1>
      </div>
      <div class="sg-type-details">
        <strong>Font:</strong> DM Serif Display, 3.2em, 400 weight &nbsp;·&nbsp;
        <strong>Usage:</strong> Page titles, hero headings &nbsp;·&nbsp;
        <strong>Letter-spacing:</strong> -0.03em
      </div>

      <div class="sg-type-specimen">
        <h2 style="margin:0; padding:0; border:0;">Section Heading (H2)</h2>
      </div>
      <div class="sg-type-details">
        <strong>Font:</strong> System sans, 2em, 600 weight &nbsp;·&nbsp;
        <strong>Usage:</strong> Major section breaks &nbsp;·&nbsp;
        <strong>Special:</strong> Gradient underline
      </div>

      <div class="sg-type-specimen">
        <h3 style="margin:0;">Subsection Heading (H3)</h3>
      </div>
      <div class="sg-type-details">
        <strong>Font:</strong> System sans, 1.35em, 600 weight &nbsp;·&nbsp;
        <strong>Usage:</strong> Subsections &nbsp;·&nbsp;
        <strong>Letter-spacing:</strong> -0.01em
      </div>

      <div class="sg-type-specimen">
        <h4 style="margin:0;">Minor Heading / Editorial (H4)</h4>
      </div>
      <div class="sg-type-details">
        <strong>Font:</strong> Georgia, italic &nbsp;·&nbsp;
        <strong>Usage:</strong> Supplementary explanations below headings
      </div>

      <div class="sg-type-specimen">
        <h5 style="margin:0;">LABEL HEADING (H5)</h5>
      </div>
      <div class="sg-type-details">
        <strong>Font:</strong> ui-monospace, 0.7rem, uppercase &nbsp;·&nbsp;
        <strong>Usage:</strong> Section classifiers, minor labels
      </div>

      <h3>Special Typography</h3>

      <div class="sg-type-specimen">
        <div style="font-family:'Georgia','Times New Roman',serif; font-size:1.1em; font-style:italic; color:var(--text-2);">This is a subhead in Georgia Italic</div>
      </div>
      <div class="sg-type-details">
        <strong>Class:</strong> <code>.subhead</code> &nbsp;·&nbsp;
        <strong>Usage:</strong> Supplementary explanation below headings
      </div>

      <div class="sg-type-specimen">
        <div class="eyebrow" style="display:inline-block;">EYEBROW LABEL</div>
      </div>
      <div class="sg-type-details">
        <strong>Class:</strong> <code>.eyebrow</code> &nbsp;·&nbsp;
        <strong>Font:</strong> 0.72rem, 600 weight, uppercase, 0.14em tracking &nbsp;·&nbsp;
        <strong>Usage:</strong> Category labels, meta-information
      </div>

      <h3>Body Text</h3>
      <p>Body text uses the system font stack at 16px with 1.65 line-height for comfortable reading. This paragraph demonstrates standard treatment with <strong>bold</strong>, <em>italic</em>, and <a href="#">link styling</a>.</p>

      <h3>Monospace / Tokens</h3>
      <p>Technical notation uses monospace: <code>3:00 / D4</code>. The <code>code</code> element renders inline as a token with background and border.</p>

      <pre><code>[6:00 / Dimension 2] — Midpoint / Psychological Interior
Examine: What is the character discovering about themselves?</code></pre>
    </div>

    <hr/>

    <!-- ==================== COORDINATE NOTATION ==================== -->
    <div class="section" id="notation">
      <h2>Coordinate Notation</h2>
      <p>Coordinates are the core technical notation of this system. They always appear as tokens with monospace typography.</p>

      <h3>Basic Format</h3>
      <p>Standard coordinate: <code>Position / Dimension</code></p>

      <table>
        <thead>
          <tr><th>Position</th><th>Dimension</th><th>Coordinate</th></tr>
        </thead>
        <tbody>
          <tr><td>12:00</td><td>Surface Dimension 5</td><td><span class="token">12:00 / D5</span></td></tr>
          <tr><td>3:00</td><td>Psychological Dimension 2</td><td><span class="token">3:00 / D2</span></td></tr>
          <tr><td>6:00</td><td>Cognitive Dimension 3</td><td><span class="token">6:00 / D3</span></td></tr>
          <tr><td>9:00</td><td>Archetype Dimension 1</td><td><span class="token">9:00 / D1</span></td></tr>
        </tbody>
      </table>

      <h3>Extended Notation</h3>
      <p>Range: <code>3:00–6:00 / D3</code> &nbsp;·&nbsp; Multiple: <code>3:00 / D2, D3, D4</code> &nbsp;·&nbsp; Full vertical: <code>6:00 / D0–D5</code></p>
    </div>

    <hr/>

    <!-- ==================== LAYOUT & SPACING ==================== -->
    <div class="section" id="spacing">
      <h2>Layout &amp; Spacing</h2>

      <h3>Spacing Scale (8px base)</h3>
      <table>
        <thead>
          <tr><th>Size</th><th>Value</th><th>Usage</th></tr>
        </thead>
        <tbody>
          <tr><td><strong>xs</strong></td><td>8px</td><td>Tight spacing, list items, inline elements</td></tr>
          <tr><td><strong>sm</strong></td><td>16px</td><td>Paragraph spacing, component padding</td></tr>
          <tr><td><strong>md</strong></td><td>24px</td><td>Section spacing, callout margins</td></tr>
          <tr><td><strong>lg</strong></td><td>48px</td><td>Major section breaks, header padding</td></tr>
          <tr><td><strong>xl</strong></td><td>64px</td><td>Page-level divisions</td></tr>
        </tbody>
      </table>

      <h3>Content Width</h3>
      <p>Maximum content width: 800px (centered). Outer container: 1280px. Reading column is narrow for comfortable line lengths; sidebar sits alongside.</p>

      <h3>Border Radius</h3>
      <p><strong>Small</strong> (3px): tokens, inline code &nbsp;·&nbsp; <strong>Medium</strong> (6px): callouts, cards, tables &nbsp;·&nbsp; <strong>Large</strong> (8px): heroes, main containers</p>
    </div>

    <hr/>

    <!-- ==================== COMPASS RIGHT RAIL VISUALS ==================== -->
    <div class="section" id="rail-visuals">
      <h2>Compass Right Rail Visuals</h2>
      <p>Each Compass page passes a <code>visual</code> prop to <code>&lt;CompassRail&gt;</code> to render a bespoke per-page illustration in the Legend area of the right rail. Pass <code>visual="..."</code> — do not inline SVG in page files.</p>

      <div style="display:grid; grid-template-columns:repeat(auto-fill, minmax(200px, 1fr)); gap:1rem; margin:1.5rem 0;">

        <div style="border:1px solid var(--border); border-radius:var(--radius-lg); padding:1rem; background:var(--surface);">
          <p style="font-size:0.6875rem; font-weight:700; text-transform:uppercase; letter-spacing:0.08em; color:var(--text-3); margin:0 0 0.75rem;">visual="clock-arc"</p>
          <!-- RailClockArc inline preview -->
          <div class="rail-visual" aria-hidden="true">
            <svg width="96" height="96" viewBox="0 0 96 96" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="48" cy="48" r="36" stroke="var(--semantic-h)" stroke-width="1.5" stroke-dasharray="4 3" opacity="0.35"/>
              <line x1="8" y1="48" x2="88" y2="48" stroke="var(--semantic-h)" stroke-width="2.5" stroke-linecap="round"/>
              <polyline points="78,44 88,48 78,52" stroke="var(--semantic-h)" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="48" cy="48" r="4.5" fill="var(--text-3)"/>
              <circle cx="48" cy="12" r="2.5" fill="var(--semantic-h)" opacity="0.5"/>
              <circle cx="88" cy="48" r="2.5" fill="var(--semantic-h)" opacity="0.7"/>
              <circle cx="48" cy="84" r="2.5" fill="var(--semantic-h)" opacity="0.5"/>
              <circle cx="8"  cy="48" r="2.5" fill="var(--semantic-h)" opacity="0.5"/>
              <text x="90" y="44" font-family="monospace" font-size="9" fill="var(--semantic-h)" text-anchor="start">H</text>
              <text x="52" y="14" font-family="monospace" font-size="8" fill="var(--semantic-h)" opacity="0.55">12</text>
              <text x="52" y="87" font-family="monospace" font-size="8" fill="var(--semantic-h)" opacity="0.55">6</text>
            </svg>
          </div>
          <p style="font-size:0.75rem; color:var(--text-2); margin:0.5rem 0 0;">Used on: <strong>II. Horizontal Axis</strong><br/>Dashed clock circle + H arrow</p>
        </div>

        <div style="border:1px solid var(--border); border-radius:var(--radius-lg); padding:1rem; background:var(--surface);">
          <p style="font-size:0.6875rem; font-weight:700; text-transform:uppercase; letter-spacing:0.08em; color:var(--text-3); margin:0 0 0.75rem;">visual="depth-scale"</p>
          <!-- RailDepthScale inline preview -->
          <div class="rail-visual" aria-hidden="true">
            <svg width="72" height="90" viewBox="0 0 72 90" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="18" y="8"  width="36" height="9" rx="2" fill="var(--semantic-v)" fill-opacity="0.35"/>
              <rect x="20" y="21" width="32" height="9" rx="2" fill="var(--semantic-v)" fill-opacity="0.48"/>
              <rect x="22" y="34" width="28" height="9" rx="2" fill="var(--semantic-v)" fill-opacity="0.61"/>
              <rect x="24" y="47" width="24" height="9" rx="2" fill="var(--semantic-v)" fill-opacity="0.74"/>
              <rect x="26" y="60" width="20" height="9" rx="2" fill="var(--semantic-v)" fill-opacity="0.87"/>
              <rect x="28" y="73" width="16" height="9" rx="2" fill="var(--semantic-v)" fill-opacity="1"/>
              <text x="10" y="15.5" font-family="monospace" font-size="7" fill="var(--text-3)">D5</text>
              <text x="10" y="28.5" font-family="monospace" font-size="7" fill="var(--text-3)">D4</text>
              <text x="10" y="41.5" font-family="monospace" font-size="7" fill="var(--text-3)">D3</text>
              <text x="10" y="54.5" font-family="monospace" font-size="7" fill="var(--text-3)">D2</text>
              <text x="10" y="67.5" font-family="monospace" font-size="7" fill="var(--text-3)">D1</text>
              <text x="10" y="80.5" font-family="monospace" font-size="7" fill="var(--text-3)">D0</text>
              <text x="36" y="88" text-anchor="middle" font-family="monospace" font-size="7" fill="var(--text-3)">surface → core</text>
            </svg>
          </div>
          <p style="font-size:0.75rem; color:var(--text-2); margin:0.5rem 0 0;">Used on: <strong>III. Vertical Axis</strong><br/>D5→D0 tapering depth scale</p>
        </div>

        <div style="border:1px solid var(--border); border-radius:var(--radius-lg); padding:1rem; background:var(--surface);">
          <p style="font-size:0.6875rem; font-weight:700; text-transform:uppercase; letter-spacing:0.08em; color:var(--text-3); margin:0 0 0.75rem;">visual="cross"</p>
          <!-- RailCompassCross inline preview -->
          <div class="rail-visual" aria-hidden="true">
            <svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
              <line x1="6"  y1="36" x2="66" y2="36" stroke="var(--semantic-h)" stroke-width="2" stroke-linecap="round"/>
              <line x1="36" y1="6"  x2="36" y2="66" stroke="var(--semantic-v)" stroke-width="2" stroke-linecap="round"/>
              <circle cx="36" cy="36" r="4" fill="var(--text-3)"/>
              <polyline points="58,33 66,36 58,39" stroke="var(--semantic-h)" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
              <polyline points="33,14 36,6 39,14"  stroke="var(--semantic-v)" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
              <text x="63" y="48" font-family="monospace" font-size="8" fill="var(--semantic-h)" text-anchor="end">H</text>
              <text x="48" y="12" font-family="monospace" font-size="8" fill="var(--semantic-v)">V</text>
            </svg>
          </div>
          <p style="font-size:0.75rem; color:var(--text-2); margin:0.5rem 0 0;">Used on: <strong>I. Orientation</strong>, <strong>Index</strong><br/>H × V axis cross</p>
        </div>

        <div style="border:1px solid var(--border); border-radius:var(--radius-lg); padding:1rem; background:var(--surface);">
          <p style="font-size:0.6875rem; font-weight:700; text-transform:uppercase; letter-spacing:0.08em; color:var(--text-3); margin:0 0 0.75rem;">visual="coord-chip"</p>
          <!-- RailCoordChip inline preview -->
          <div class="rail-visual" aria-hidden="true">
            <div class="rail-coord-chip">
              <span class="rail-coord-chip__label">Format</span>
              <code class="rail-coord-chip__value">H:MM / Dn</code>
              <span class="rail-coord-chip__example">e.g. <code>6:00 / D2</code></span>
            </div>
          </div>
          <p style="font-size:0.75rem; color:var(--text-2); margin:0.5rem 0 0;">Used on: <strong>IV. Intersection Logic</strong><br/>Coordinate format reference</p>
        </div>

      </div>

      <div class="sg-type-details">
        <strong>Prop:</strong> <code>visual="clock-arc" | "depth-scale" | "cross" | "coord-chip"</code> &nbsp;·&nbsp;
        <strong>Where:</strong> <code>CompassRail</code> component, Legend section &nbsp;·&nbsp;
        <strong>Rule:</strong> One visual per page. Each page gets its own. Do not share visuals between pages unless the pages share a subject.
      </div>
    </div>

    <hr/>

    <!-- ==================== OVERVIEW BLOCK ==================== -->
    <div class="section" id="overview-block">
      <h2>Overview Block</h2>
      <p>The canonical above-the-fold summary block on all Compass section pages. Replaces the old intro lead paragraph — do not duplicate it. Uses label+sentence rows, not bullets.</p>

      <div class="page-overview" style="max-width:600px;">
        <p class="page-overview__lead">The overview block summarises the page in one sentence — what it covers, who it's for, and what work it does. This is the lead.</p>
        <div class="page-overview__rows">
          <p class="page-overview__row"><strong class="page-overview__label">What you'll learn:</strong> The three row labels, their typography, and how they differ from a bullet list.</p>
          <p class="page-overview__row"><strong class="page-overview__label">What to do:</strong> Use <code>page-overview__rows</code> + <code>page-overview__row</code> + <code>page-overview__label</code> — never a <code>&lt;ul&gt;</code>.</p>
          <p class="page-overview__row"><strong class="page-overview__label">What to watch for:</strong> Font-family drift or list styling leaking in from a parent context — the block must inherit body system-sans only.</p>
        </div>
      </div>

      <div class="sg-type-details" style="margin-top:1rem;">
        <strong>Container:</strong> <code>.page-overview</code> &nbsp;·&nbsp;
        <strong>Lead:</strong> <code>.page-overview__lead</code> (0.9375rem, var(--text-2)) &nbsp;·&nbsp;
        <strong>Rows:</strong> <code>.page-overview__rows</code> + <code>.page-overview__row</code> (0.8125rem) &nbsp;·&nbsp;
        <strong>Label:</strong> <code>.page-overview__label</code> (600 weight, var(--text)) &nbsp;·&nbsp;
        <strong>CSS:</strong> <code>src/styles/patterns/content.css</code>
      </div>
    </div>

    <hr/>

    <!-- ==================== PROGRESSIVE DISCLOSURE ==================== -->
    <div class="section" id="progressive-disclosure">
      <h2>Progressive Disclosure — <code>&lt;details&gt;</code> / <code>&lt;summary&gt;</code></h2>
      <p>Global token-driven styling for native HTML disclosure. Ready to use — not yet applied broadly. The <code>›</code> chevron animates on open. Do not wrap entire page sections in <code>&lt;details&gt;</code> yet.</p>

      <details style="max-width:500px;">
        <summary>What is progressive disclosure?</summary>
        <p>A pattern where secondary content is hidden until the user requests it. Used for reference material, worked examples, and footnote-level information that would otherwise interrupt the reading flow.</p>
      </details>
      <details style="max-width:500px;">
        <summary>When to use it</summary>
        <p>Use only for content that is genuinely optional for most readers on most visits — supplementary examples, edge cases, extended definitions. Do not use for primary page content.</p>
      </details>

      <div class="sg-type-details" style="margin-top:1rem;">
        <strong>Elements:</strong> native <code>&lt;details&gt;</code> / <code>&lt;summary&gt;</code> &nbsp;·&nbsp;
        <strong>CSS:</strong> <code>src/styles/patterns/content.css</code> &nbsp;·&nbsp;
        <strong>Tokens used:</strong> <code>--border</code>, <code>--surface</code>, <code>--text</code>, <code>--radius-md</code> &nbsp;·&nbsp;
        <strong>Do not:</strong> add class names, wrap entire pages, or replicate with JS
      </div>
    </div>

    <hr/>

    <!-- ==================== HEROES ==================== -->
    <div class="section" id="heroes">
      <h2>Page Heroes</h2>

      <h3>Gradient Hero (Compass pages)</h3>
      <div class="page-hero page-hero--gradient" style="position:relative;">
        <div class="eyebrow">SECTION LABEL</div>
        <h1 style="font-size:1.75rem;">Page Title Here</h1>
        <p class="subtitle">Subtitle description text</p>
      </div>

      <h3>Slim Hero — Compass Section Standard <code>page-hero--slim</code></h3>
      <p>The canonical hero for all Compass section pages. Eyebrow + H1 only. No icon, no subtitle, no chips. Meta belongs in the right rail.</p>
      <div class="page-hero page-hero--gradient page-hero--slim">
        <div class="eyebrow">SECTION II</div>
        <h1 style="font-size:1.75rem;">Horizontal Axis</h1>
      </div>
      <div class="sg-type-details">
        <strong>Classes:</strong> <code>page-hero--gradient page-hero--slim</code> (or any color variant + slim) &nbsp;·&nbsp;
        <strong>Contents:</strong> eyebrow + h1 only &nbsp;·&nbsp;
        <strong>Do not add:</strong> subtitle, icon, chips — move those to the right rail
      </div>

      <h3>Amber Hero</h3>
      <div class="page-hero page-hero--amber">
        <div class="eyebrow">HORIZONTAL</div>
        <h1 style="font-size:1.75rem;">Amber Variant</h1>
      </div>

      <h3>Teal Hero</h3>
      <div class="page-hero page-hero--teal">
        <div class="eyebrow">VERTICAL</div>
        <h1 style="font-size:1.75rem;">Teal Variant</h1>
      </div>

      <h3>Neutral Hero (Meta pages)</h3>
      <div class="page-hero page-hero--neutral">
        <div class="eyebrow eyebrow--neutral">REFERENCE</div>
        <h1 style="font-size:1.75rem;">Neutral Variant</h1>
        <p class="subtitle">For Style Guide, Roadmap, and other system-level pages that aren't axis-specific.</p>
      </div>
      <div class="sg-type-details">
        <strong>Class:</strong> <code>page-hero--neutral</code> &nbsp;·&nbsp;
        <strong>Stripe color:</strong> <code>var(--border-accent)</code> (mid-gray) &nbsp;·&nbsp;
        <strong>Use when:</strong> Page is about the system itself, not about axis content
      </div>
    </div>

    <hr/>

    <!-- ==================== CALLOUTS ==================== -->
    <div class="section" id="callouts">
      <h2>Callouts</h2>

      <h3>Axis Callouts (Canonical Pattern)</h3>
      <p>The canonical pattern for axis-level signaling. Icon circle is generated via CSS <code>::before</code>.</p>

      <div class="dimension-horizontal">
        <h4>HORIZONTAL AXIS (Story Timeline Position):</h4>
        <p>Amber left border + → icon. Signals content about story timeline, position, progression, and structure.</p>
      </div>

      <div class="dimension-vertical">
        <h4>VERTICAL AXIS (Story Depth Dimension):</h4>
        <p>Teal left border + ↓ icon. Signals content about story depth, dimensions (D0–D5), and layers.</p>
      </div>

      <div class="sg-type-details" style="margin-top:1rem;">
        <strong>Markup:</strong> <code>.dimension-horizontal</code> or <code>.dimension-vertical</code> wrapper
      </div>

      <h3>Info / Example / Warning Callouts</h3>

      <div class="callout-info">
        <h4>Info Callout</h4>
        <p>Important conceptual notes or definitions. Blue left border.</p>
        <p><strong>Class:</strong> <code>.callout-info</code></p>
      </div>

      <div class="callout-example">
        <h4>Example Callout</h4>
        <p>Worked examples or demonstrations. Green left border.</p>
        <p><strong>Class:</strong> <code>.callout-example</code></p>
      </div>

      <div class="callout-warning">
        <h4>Warning / Caution Callout</h4>
        <p>Deprecated patterns or critical constraints. Red left border.</p>
        <p><strong>Class:</strong> <code>.callout-warning</code></p>
      </div>
    </div>

    <hr/>

    <!-- ==================== CARDS ==================== -->
    <div class="section" id="cards">
      <h2>Cards</h2>

      <h3>TOC Cards</h3>
      <p>In-page navigation grid. Teal border + lift on hover.</p>
      <nav class="toc-grid">
        <div class="toc-grid__label">On This Page</div>
        <div class="toc-grid__items">
          <a href="#" class="toc-grid__link">First Section</a>
          <a href="#" class="toc-grid__link">Second Section</a>
          <a href="#" class="toc-grid__link">Third Section</a>
          <a href="#" class="toc-grid__link">Fourth Section</a>
        </div>
      </nav>

      <h3>Category Cards</h3>
      <div class="card-grid card-grid--3" style="margin-bottom:1.5rem;">
        <div class="cat-card cat-card--amber" style="pointer-events:none;">
          <div class="cat-card__icon cat-card__icon--amber">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>
          </div>
          <div class="cat-card__title">Amber Card</div>
          <div class="cat-card__count">Music / Horizontal</div>
        </div>
        <div class="cat-card cat-card--teal" style="pointer-events:none;">
          <div class="cat-card__icon cat-card__icon--teal">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/></svg>
          </div>
          <div class="cat-card__title">Teal Card</div>
          <div class="cat-card__count">Story / Vertical</div>
        </div>
        <div class="cat-card cat-card--gradient" style="pointer-events:none;">
          <div class="cat-card__icon cat-card__icon--gradient">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"/></svg>
          </div>
          <div class="cat-card__title">Gradient Card</div>
          <div class="cat-card__count">Compass / Both axes</div>
        </div>
      </div>

      <h3>Compass Section Card</h3>
      <div style="max-width:500px;">
        <a href="#" class="compass-card" style="pointer-events:none;">
          <div class="compass-card__num">IV</div>
          <div class="compass-card__body">
            <div class="compass-card__title">Section Title</div>
            <div class="compass-card__desc">Description text for the section card component</div>
          </div>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:var(--text-3); flex-shrink:0;"><polyline points="9 18 15 12 9 6"/></svg>
        </a>
      </div>

      <h3>Dimension Cards</h3>
      <p>Used on the Vertical Axis page to present each of the six story depth dimensions.</p>
      <div class="dimension-card">
        <span class="dimension-number">SURFACE DIMENSION 5</span>
        <h2 class="dimension-title">Expressive / Symbolic</h2>
        <p class="dimension-position">What you directly see and hear</p>
        <p>Observable phenomena — what literally appears, is said, shown, heard. The concrete surface of the story.</p>
      </div>


      <hr/>

      <h3 id="progressive-disclosure">Progressive Disclosure Components</h3>
      <p>Interactive components that collapse content walls into navigable, scannable units. All share identical chrome — same borders, backgrounds, shadows, corners, and spacing. Only the behavior and accent color change.</p>

      <h4>Expanding Cards</h4>
      <p>Interactive one-open-at-a-time cards for progressive disclosure.</p>

      <h5>Expanding Cards (Vertical)</h5>
      <p>Deck flows left to right with standing collapsed rails. All 6 depth dimensions from Surface (D5) to Core (D0).</p>
      <ExpandingCards items={dimensionCards} orientation="vertical" defaultActive="d4-structural" />

      <h5>Expanding Cards (Horizontal)</h5>
      <p>Deck flows top to bottom with laying collapsed rails. All 6 clock positions from Origin (12:00) through Midpoint (6:00) peak back to Return (12:00).</p>
      <ExpandingCards items={positionCards} orientation="horizontal" defaultActive="pos-6" />

      <h5>Expanding Cards (Slotted Vertical — 6 rails D5–D0 with nested Tabs)</h5>
      <p>Slotted mode: all 6 depth dimensions D5–D0 with nested Tabs. Use this to validate slotted-specific CSS without touching the Vertical Axis page.</p>
      <ExpandingCards
        cards={[
          { id: 'sg-d5', label: 'D5', depth: 5 },
          { id: 'sg-d4', label: 'D4', depth: 4 },
          { id: 'sg-d3', label: 'D3', depth: 3 },
          { id: 'sg-d2', label: 'D2', depth: 2 },
          { id: 'sg-d1', label: 'D1', depth: 1 },
          { id: 'sg-d0', label: 'D0', depth: 0 },
        ]}
        orientation="vertical"
        defaultActive="sg-d4"
      >
        <div slot="sg-d5">
          <div class="dimension-card">
            <span class="dimension-number">PLACEHOLDER DIMENSION 5</span>
            <h3 class="dimension-title">Surface — Placeholder Title</h3>
            <Tabs id="sg-tabs-d5" accent="teal" labels={['Overview', 'Details', 'Examples']}>
              <div slot="tab-0"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Placeholder overview for D5.</p></div>
              <div slot="tab-1"><ul><li>Detail item one</li><li>Detail item two</li><li>Detail item three</li></ul></div>
              <div slot="tab-2"><p>Example content placeholder for D5.</p></div>
            </Tabs>
          </div>
        </div>
        <div slot="sg-d4">
          <div class="dimension-card">
            <span class="dimension-number">PLACEHOLDER DIMENSION 4</span>
            <h3 class="dimension-title">Structural — Placeholder Title</h3>
            <Tabs id="sg-tabs-d4" accent="teal" labels={['Overview', 'Details', 'Examples']}>
              <div slot="tab-0"><p>Lorem ipsum dolor sit amet. Placeholder overview for D4.</p></div>
              <div slot="tab-1"><ul><li>Detail item one</li><li>Detail item two</li><li>Detail item three</li></ul></div>
              <div slot="tab-2"><p>Example content placeholder for D4.</p></div>
            </Tabs>
          </div>
        </div>
        <div slot="sg-d3">
          <div class="dimension-card">
            <span class="dimension-number">PLACEHOLDER DIMENSION 3</span>
            <h3 class="dimension-title">Cognitive — Placeholder Title</h3>
            <Tabs id="sg-tabs-d3" accent="teal" labels={['Overview', 'Details', 'Examples']}>
              <div slot="tab-0"><p>Lorem ipsum dolor sit amet. Placeholder overview for D3.</p></div>
              <div slot="tab-1"><ul><li>Detail item one</li><li>Detail item two</li><li>Detail item three</li></ul></div>
              <div slot="tab-2"><p>Example content placeholder for D3.</p></div>
            </Tabs>
          </div>
        </div>
        <div slot="sg-d2">
          <div class="dimension-card">
            <span class="dimension-number">PLACEHOLDER DIMENSION 2</span>
            <h3 class="dimension-title">Psychological — Placeholder Title</h3>
            <Tabs id="sg-tabs-d2" accent="teal" labels={['Overview', 'Details', 'Examples']}>
              <div slot="tab-0"><p>Lorem ipsum dolor sit amet. Placeholder overview for D2.</p></div>
              <div slot="tab-1"><ul><li>Detail item one</li><li>Detail item two</li><li>Detail item three</li></ul></div>
              <div slot="tab-2"><p>Example content placeholder for D2.</p></div>
            </Tabs>
          </div>
        </div>
        <div slot="sg-d1">
          <div class="dimension-card">
            <span class="dimension-number">PLACEHOLDER DIMENSION 1</span>
            <h3 class="dimension-title">Archetype — Placeholder Title</h3>
            <Tabs id="sg-tabs-d1" accent="teal" labels={['Overview', 'Details']}>
              <div slot="tab-0"><p>Lorem ipsum dolor sit amet. Placeholder overview for D1.</p></div>
              <div slot="tab-1"><ul><li>Detail item one</li><li>Detail item two</li></ul></div>
            </Tabs>
          </div>
        </div>
        <div slot="sg-d0">
          <div class="dimension-card">
            <span class="dimension-number">PLACEHOLDER DIMENSION 0</span>
            <h3 class="dimension-title">Core — Placeholder Title</h3>
            <Tabs id="sg-tabs-d0" accent="teal" labels={['Overview', 'Details']}>
              <div slot="tab-0"><p>Lorem ipsum dolor sit amet. Placeholder overview for D0.</p></div>
              <div slot="tab-1"><ul><li>Detail item one</li><li>Detail item two</li></ul></div>
            </Tabs>
          </div>
        </div>
      </ExpandingCards>

 <!-- ===== FLIP CARD DEMO ===== -->
      <h4 id="flip-cards">Flip Cards</h4>
      <p>Two-sided cards that flip on click/tap. Used for summary→detail pairs: axis descriptions, worked examples, viewing protocols. Supports <code>horizontal</code> (rotateY — page turning sideways) and <code>vertical</code> (rotateX — page turning down) flip directions.</p>

      <h5>Horizontal Flip — Teal (Vertical Axis content)</h5>
      <div class="flip-card-strip" style="max-width: 700px;">
        <FlipCard id="demo-flip-teal" accent="teal" flipDirection="horizontal">
          <div slot="front">
            <h4 style="margin:0 0 0.5rem;">Vertical Axis</h4>
            <p style="margin:0; color:var(--text-2); font-size:0.875rem;">Story depth — 6 dimensions from surface to core</p>
          </div>
          <div slot="back">
            <p style="margin:0 0 0.5rem; font-weight:600;">Dimensions (surface → core):</p>
            <p style="margin:0; font-size:0.8125rem; color:var(--text-2); line-height:1.6;">
              D5 Expressive/Symbolic → D4 Structural → D3 Cognitive → D2 Psychological → D1 Archetypal → D0 Thematic Core
            </p>
          </div>
        </FlipCard>
      </div>

      <h5>Horizontal Flip — Amber (Horizontal Axis content)</h5>
      <div class="flip-card-strip" style="max-width: 700px;">
        <FlipCard id="demo-flip-amber" accent="amber" flipDirection="horizontal">
          <div slot="front">
            <h4 style="margin:0 0 0.5rem;">Horizontal Axis</h4>
            <p style="margin:0; color:var(--text-2); font-size:0.875rem;">Story timeline — clock positions from origin through crisis to return</p>
          </div>
          <div slot="back">
            <p style="margin:0 0 0.5rem; font-weight:600;">Clock Positions:</p>
            <p style="margin:0; font-size:0.8125rem; color:var(--text-2); line-height:1.6;">
              12:00 Origin → 1:00 Catalyst → 3:00 Threshold → 6:00 Midpoint → 9:00 Crisis → 12:00 Return
            </p>
          </div>
        </FlipCard>
      </div>

      <h5>Vertical Flip — Blue (Navigation Protocol content)</h5>
      <div class="flip-card-strip" style="max-width: 700px;">
        <FlipCard id="demo-flip-blue" accent="blue" flipDirection="vertical">
          <div slot="front">
            <h4 style="margin:0 0 0.5rem;">Top-Down Analysis</h4>
            <p style="margin:0; color:var(--text-2); font-size:0.875rem;">Start with what's visible, drill toward meaning</p>
          </div>
          <div slot="back">
            <p style="margin:0; font-size:0.8125rem; color:var(--text-2); line-height:1.6;">
              <strong>Protocol:</strong> Observe surface (D5) → Identify structure (D4) → Analyze reasoning (D3) → Explore psychology (D2) → Find archetype (D1) → Discover core (D0)
            </p>
          </div>
        </FlipCard>
      </div>

      <h5>Gradient Variant — FlipCard Strip (multiple cards in row)</h5>
      <p>Multiple cards in a responsive grid. Used for viewing protocols on the Practical Application page.</p>
      <div class="flip-card-strip">
        <FlipCard id="demo-flip-first" accent="gradient" flipDirection="horizontal">
          <div slot="front">
            <h4 style="margin:0 0 0.25rem;">First Viewing</h4>
            <p style="margin:0; color:var(--text-2); font-size:0.8125rem;">Intuitive response</p>
          </div>
          <div slot="back">
            <p style="margin:0; font-size:0.8125rem; color:var(--text-2);">Watch without interruption. Note only major reactions. Mark timestamps of significant moments. Let the film work on you.</p>
          </div>
        </FlipCard>
        <FlipCard id="demo-flip-second" accent="gradient" flipDirection="horizontal">
          <div slot="front">
            <h4 style="margin:0 0 0.25rem;">Second Viewing</h4>
            <p style="margin:0; color:var(--text-2); font-size:0.8125rem;">Analytical pass</p>
          </div>
          <div slot="back">
            <p style="margin:0; font-size:0.8125rem; color:var(--text-2);">Pause and log scenes. Document coordinates. Apply frameworks. Build structured notes.</p>
          </div>
        </FlipCard>
        <FlipCard id="demo-flip-third" accent="gradient" flipDirection="horizontal">
          <div slot="front">
            <h4 style="margin:0 0 0.25rem;">Third+ Viewing</h4>
            <p style="margin:0; color:var(--text-2); font-size:0.8125rem;">Targeted deep dive</p>
          </div>
          <div slot="back">
            <p style="margin:0; font-size:0.8125rem; color:var(--text-2);">Focus on specific dimensions. Check mirror relationships. Verify patterns. Fill gaps in analysis.</p>
          </div>
        </FlipCard>
      </div>

      <div class="sg-type-details">
        <strong>Component:</strong> <code>&lt;FlipCard id="..." accent="teal|amber|blue|gradient" flipDirection="horizontal|vertical"&gt;</code> &nbsp;·&nbsp;
        <strong>Slots:</strong> <code>front</code>, <code>back</code> &nbsp;·&nbsp;
        <strong>Interaction:</strong> Click/tap to flip &nbsp;·&nbsp;
        <strong>Keyboard:</strong> Enter/Space toggles &nbsp;·&nbsp;
        <strong>ARIA:</strong> <code>aria-expanded</code> toggles on wrapper &nbsp;·&nbsp;
        <strong>Animation:</strong> <code>rotateY(180deg)</code> horizontal, <code>rotateX(180deg)</code> vertical, <code>0.4s ease</code> &nbsp;·&nbsp;
        <strong>Deep-link:</strong> <code>#card-id</code> opens flipped on load &nbsp;·&nbsp;
        <strong>No-JS:</strong> Both faces visible stacked &nbsp;·&nbsp;
        <strong>Strip:</strong> <code>.flip-card-strip</code> wraps multiple cards in a responsive grid
      </div>

      <h5>flipDirection Spatial Metaphor</h5>
      <p>
        <strong>Horizontal (rotateY)</strong> — card turns like a page sideways. Use for horizontal-axis content, general summary→detail pairs.<br/>
        <strong>Vertical (rotateX)</strong> — card turns like a page flipping down. Use for vertical-axis content, top→bottom conceptual movement, protocol steps.
      </p>
      <p>This matches the coordinate system metaphor: horizontal flip reinforces the horizontal axis spatial model; vertical flip reinforces the vertical axis spatial model.</p>
      <!-- ===== CHROME PROOF ===== -->
      <h4>Chrome Proof</h4>
      <p>All progressive disclosure components share identical chrome. This table proves it — only behavior and accent color change.</p>

      <table class="chrome-proof-table">
        <thead>
          <tr>
            <th>Property</th>
            <th>Value</th>
            <th>Rule</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Border</td>
            <td><code>1px solid var(--border)</code></td>
            <td>Every card, panel, and container</td>
          </tr>
          <tr>
            <td>Radius (cards)</td>
            <td><code>var(--radius-md)</code> = 6px</td>
            <td>All card-like elements</td>
          </tr>
          <tr>
            <td>Radius (containers)</td>
            <td><code>var(--radius-lg)</code> = 10px</td>
            <td>Outer wrappers only</td>
          </tr>
          <tr>
            <td>Background</td>
            <td><code>var(--surface)</code> / <code>var(--surface-elevated)</code></td>
            <td>Active = surface, collapsed = surface-elevated</td>
          </tr>
          <tr>
            <td>Text colors</td>
            <td><code>--text</code>, <code>--text-2</code>, <code>--text-3</code></td>
            <td>Three levels only. Never raw hex.</td>
          </tr>
          <tr>
            <td>Shadow</td>
            <td><code>--shadow-subtle</code> / <code>--shadow-card</code></td>
            <td>Hover = subtle, active = card</td>
          </tr>
          <tr>
            <td>Transition</td>
            <td><code>0.2s</code> hover / <code>0.3–0.4s</code> expand</td>
            <td>Nothing slower than 0.5s, nothing instant</td>
          </tr>
          <tr>
            <td>Axis accent</td>
            <td>Border stripe only (left or top)</td>
            <td>Never background fill</td>
          </tr>
        </tbody>
      </table>
    </div>

    <hr/>

    <!-- ==================== TABLES ==================== -->
    <div class="section" id="tables">
      <h2>Tables</h2>
      <p>Standard table styling with colored headers, alternating rows, and subtle borders.</p>

      <table>
        <thead>
          <tr>
            <th>Position</th>
            <th>Name</th>
            <th>Function</th>
            <th>Dimension</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><span class="token">3:00</span></td>
            <td>First Threshold</td>
            <td>Point of no return — commitment to the journey</td>
            <td>Archetypal (D1)</td>
          </tr>
          <tr>
            <td><span class="token">6:00</span></td>
            <td>Midpoint Revelation</td>
            <td>Core truth exposed — stakes transformed</td>
            <td>Psychological (D2)</td>
          </tr>
          <tr>
            <td><span class="token">9:00</span></td>
            <td>Crisis Point</td>
            <td>Maximum pressure — all dimensions converge</td>
            <td>Core (D0)</td>
          </tr>
        </tbody>
      </table>
    </div>

    <hr/>

    <!-- ==================== TOKENS & TAGS ==================== -->
    <div class="section" id="tokens-tags">
      <h2>Tokens &amp; Tags</h2>

      <h3>Inline Tokens</h3>
      <p>Coordinates and key terms use monospace: <span class="token">6:00</span> <span class="token">Dimension 2</span> <span class="token">Midpoint</span></p>

      <h3>Source Tags</h3>
      <p>Mark content origin: <span class="source-tag">COMPASS</span> <span class="source-tag">LIBRARY</span> <span class="source-tag">ORIGINAL</span></p>

      <h3>Schema Labels</h3>
      <p>
        <span class="schema-label" style="background:var(--semantic-h); color:white;">Horizontal</span>
        <span class="schema-label" style="background:var(--semantic-v); color:white;">Vertical</span>
        <span class="schema-label" style="background:var(--accent-purple); color:white;">Compass</span>
        <span class="schema-label">Default</span>
      </p>

      <h3>Cross-Reference Links</h3>
      <p>Links to other frameworks: <a class="cross-link" href="#">Hero's Journey</a> · <a class="cross-link" href="#">Save the Cat</a> · <a class="cross-link" href="#">Dramatica</a></p>
    </div>

    <hr/>

    <!-- ==================== LISTS & CHECKLISTS ==================== -->
    <div class="section" id="lists">
      <h2>Lists &amp; Checklists</h2>

      <h3>Standard List</h3>
      <ul>
        <li>First list item with standard spacing</li>
        <li>Second item — notice the tighter line height (1.5)</li>
        <li>Third item with <strong>bold</strong> and <a href="#">link</a> inline</li>
        <li>Fourth item to show vertical rhythm</li>
      </ul>

      <h3>Checklist</h3>
      <div class="checklist">
        <div>✓ Coordinate system orientation complete</div>
        <div>✓ Horizontal axis frameworks mapped</div>
        <div>✓ Vertical axis dimensions defined</div>
        <div>✓ Intersection logic documented</div>
      </div>
    </div>

    <hr/>

    <!-- ==================== STRUCTURAL CONTAINERS ==================== -->
    <div class="section" id="containers">
      <h2>Structural Containers</h2>

      <h3>Cockpit Layout — <code>.cockpit</code></h3>
      <p>The two-column grid used on all Compass section pages. Left: <code>.cockpit__main</code> (prose, all page content). Right: <code>.cockpit__rail</code> (sticky sidebar). Collapses to single column on mobile, rail moves above content.</p>
      <div class="sg-type-details">
        <strong>Grid:</strong> <code>minmax(0, 1fr) var(--rail-width)</code> &nbsp;·&nbsp;
        <strong>Gap:</strong> <code>var(--cockpit-gap)</code> &nbsp;·&nbsp;
        <strong>Rail:</strong> sticky, max-height = viewport minus header &nbsp;·&nbsp;
        <strong>Mobile:</strong> single column, rail first &nbsp;·&nbsp;
        <strong>Prose clamp:</strong> <code>.cockpit__main p/li/blockquote</code> max 72ch &nbsp;·&nbsp;
        <strong>CSS:</strong> <code>src/styles/patterns/layout.css</code>
      </div>
      <pre style="background:var(--surface-elevated); border:1px solid var(--border); border-radius:var(--radius-md); padding:1rem; font-size:0.8125rem; overflow-x:auto; margin:1rem 0;"><code>&lt;div class="cockpit"&gt;
  &lt;main class="cockpit__main"&gt;
    &lt;!-- all page content --&gt;
  &lt;/main&gt;
  &lt;aside class="cockpit__rail"&gt;
    &lt;CompassRail visual="clock-arc" chips=&#123;[...]&#125; /&gt;
  &lt;/aside&gt;
&lt;/div&gt;</code></pre>

      <h3>Rail Chip — <code>.rail-chip</code></h3>
      <p>Compact label+value row used inside <code>CompassRail</code> to surface page metadata (axis name, notation format, example coordinate). Always rendered via the <code>chips</code> prop — never hardcoded.</p>
      <div style="display:flex; flex-direction:column; gap:0.375rem; max-width:280px; margin:1rem 0;">
        <div class="rail-chip">
          <span class="rail-chip__label">Measures</span>
          <span class="rail-chip__value">Story Timeline Position</span>
        </div>
        <div class="rail-chip">
          <span class="rail-chip__label">Notation</span>
          <span class="rail-chip__value">H:MM</span>
        </div>
        <div class="rail-chip">
          <span class="rail-chip__label">Example</span>
          <span class="rail-chip__value">6:00 / D2</span>
        </div>
      </div>
      <div class="sg-type-details">
        <strong>Elements:</strong> <code>.rail-chip</code> → <code>.rail-chip__label</code> + <code>.rail-chip__value</code> &nbsp;·&nbsp;
        <strong>Label:</strong> 0.6875rem, 700, uppercase, var(--text-3) &nbsp;·&nbsp;
        <strong>Value:</strong> 0.75rem, monospace, var(--text-2) &nbsp;·&nbsp;
        <strong>Background:</strong> <code>var(--surface-elevated)</code> &nbsp;·&nbsp;
        <strong>CSS:</strong> <code>src/styles/patterns/layout.css</code>
      </div>

      <h3>Page Stamp — <code>.page-stamp</code></h3>
      <p>End-of-page footer metadata block showing the Compass coordinate and build date. Centered, muted, separated from content by a top border. One per page, placed last inside <code>.cockpit__main</code>.</p>
      <div class="page-stamp" style="max-width:400px;">
        <p>COMPASS · Horizontal Axis · <code>H:MM / Dn</code></p>
        <p>Updated February 2026</p>
      </div>
      <div class="sg-type-details" style="margin-top:1rem;">
        <strong>Class:</strong> <code>.page-stamp</code> &nbsp;·&nbsp;
        <strong>Position:</strong> last child inside <code>.cockpit__main</code> &nbsp;·&nbsp;
        <strong>Font:</strong> 0.8125rem, var(--text-3) &nbsp;·&nbsp;
        <strong>CSS:</strong> <code>src/styles/patterns/layout.css</code>
      </div>

      <h3>Crosswalk Dimension</h3>
      <p>Groups dimension-specific analysis with a subtle left accent:</p>
      <div style="padding:16px; margin:16px 0; border-left:3px solid var(--border-accent, var(--border)); background:var(--surface-elevated); border-radius:var(--radius-sm);">
        <div class="schema-label">Example Dimension</div>
        <p style="margin:0;">Content within a crosswalk dimension container. Provides visual grouping and subtle left-border accent.</p>
      </div>

      <h3>Framework Definition</h3>
      <p>Contains structured analytical content:</p>
      <div style="padding:20px; margin:16px 0; background:var(--surface-elevated); border-radius:var(--radius-md);">
        <h5 style="margin-top:0;">Definition</h5>
        <p><strong>Structural Function:</strong> Example structural function description.</p>
        <p style="margin-bottom:0;"><strong>Defining Logic:</strong> Example defining logic description.</p>
      </div>
    </div>

    <hr/>

    <!-- ==================== NAVIGATION ==================== -->
    <div class="section" id="navigation">
      <h2>Navigation Components</h2>

      <h3>Breadcrumb</h3>
      <nav class="breadcrumb">
        <a href="#">Home</a>
        <span class="sep">›</span>
        <a href="#">Compass</a>
        <span class="sep">›</span>
        <strong>Current Page</strong>
      </nav>

      <h3>Section Nav (Prev / Next)</h3>
      <nav class="section-nav" style="pointer-events:none;">
        <a href="#" class="section-nav__link section-nav__link--prev">
          <span class="section-nav__arrow">←</span>
          <span>
            <span class="section-nav__label">Previous</span>
            <span class="section-nav__title">Orientation</span>
          </span>
        </a>
        <a href="#" class="section-nav__link section-nav__link--next">
          <span>
            <span class="section-nav__label">Next</span>
            <span class="section-nav__title">Vertical Axis</span>
          </span>
          <span class="section-nav__arrow">→</span>
        </a>
      </nav>

      <h3>Axis Boxes (Compass Index)</h3>
      <div style="display:grid; grid-template-columns:1fr 1fr; gap:1rem; margin:20px 0;">
        <div class="axis-box axis-box--h">
          <div class="axis-box__label axis-box__label--h">HORIZONTAL →</div>
          <p class="axis-box__text">Story Position / Timeline</p>
        </div>
        <div class="axis-box axis-box--v">
          <div class="axis-box__label axis-box__label--v">VERTICAL ↓</div>
          <p class="axis-box__text">Story Depth / Dimensions</p>
        </div>
      </div>

      <h3>Left Sidebar (v3.5)</h3>
      <p>Collapsible left sidebar with auto-generated TOC, scroll spy, and Compass sibling navigation. Toggle via the <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:-2px;"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="9" y1="3" x2="9" y2="21"/></svg> button in the header. Index pages default to sidebar closed (content centered); content pages default to sidebar open.</p>
    </div>

    <!-- ===== MODULE CARDS ===== -->
    <!-- NOTE: sections below replace previous module-card specimens -->
    <div class="sg-section" id="module-cards">
      <h2>Module Cards</h2>
      <p>Home dashboard cards. Each card gets its color identity from a single <code>--module-*</code> CSS variable defined in <code>tokens.css</code>. The card background, border, icon container, and chip are all derived from that one token via <code>color-mix()</code> — no scattered hex values.</p>

      <h3>Live vs Coming Soon</h3>
      <p>Live modules render as <code>&lt;a&gt;</code> tags and show a right-arrow affordance. Coming-soon modules render as <code>&lt;div aria-disabled="true"&gt;</code> — no broken href, accessible to screen readers.</p>

      <h3>Specimen</h3>
      <div class="module-grid" style="margin-bottom:2rem;">
        <a href="#" class="module-card module-card--compass" style="--module-color:var(--module-compass)">
          <div class="module-card__header">
            <div class="module-card__icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"/></svg></div>
            <svg class="module-card__arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
          </div>
          <div class="module-card__title">Story Coordinate Compass</div>
          <div class="module-card__desc">Gradient identity. Thin top accent from <code>--gradient-brand</code>.</div>
          <div class="module-card__meta"><span class="module-chip">8 sections</span></div>
        </a>

        <a href="#" class="module-card module-card--library" style="--module-color:var(--module-library)">
          <div class="module-card__header">
            <div class="module-card__icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect x="3" y="3" width="4" height="18" rx="1"/><rect x="9" y="3" width="4" height="18" rx="1"/><path d="M15 5l4 14"/></svg></div>
            <svg class="module-card__arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
          </div>
          <div class="module-card__title">Library Links</div>
          <div class="module-card__desc">Purple/lavender identity. <code>--module-library</code>.</div>
          <div class="module-card__meta"><span class="module-chip">Resources</span></div>
        </a>

        <div class="module-card module-card--piano" style="--module-color:var(--module-piano)" aria-disabled="true">
          <div class="module-card__header">
            <div class="module-card__icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect x="2" y="5" width="20" height="14" rx="1"/><path d="M7 5v8M12 5v8M17 5v8"/><path d="M9.5 5v5M14.5 5v5"/></svg></div>
          </div>
          <div class="module-card__title">Piano Exercise Matrix</div>
          <div class="module-card__desc">Disabled/coming-soon state. Red identity. <code>--module-piano</code>.</div>
          <div class="module-card__meta"><span class="module-chip module-chip--coming">Coming Soon</span></div>
        </div>
      </div>

      <h3>Token Formula</h3>
      <p>Set <code>--module-color</code> once per card as an inline style. All derived values come from that single token:</p>
      <ul>
        <li><strong>Card background:</strong> <code>color-mix(in srgb, var(--module-color) 10%, var(--surface))</code></li>
        <li><strong>Border:</strong> <code>color-mix(in srgb, var(--module-color) 40%, var(--border))</code></li>
        <li><strong>Icon container:</strong> <code>color-mix(in srgb, var(--module-color) 18%, var(--surface))</code></li>
        <li><strong>Chip:</strong> <code>color-mix(in srgb, var(--module-color) 16%, var(--surface))</code></li>
        <li><strong>Hover shadow:</strong> <code>color-mix(in srgb, var(--module-color) 22%, transparent)</code></li>
      </ul>

      <h3>Adding a Future Module</h3>
      <ol>
        <li>Define <code>--module-yourmodule: #HEX;</code> once in <code>tokens.css</code> (also add dark-mode variant if needed).</li>
        <li>Add entry to the <code>modules</code> array in <code>src/pages/index.astro</code>.</li>
        <li>Add the corresponding SVG icon inline (or store in <code>src/icons/</code>).</li>
        <li>Set <code>style="--module-color:var(--module-yourmodule)"</code> on the card element.</li>
      </ol>
    </div>

    <!-- ===== ICON SYSTEM ===== -->
    <div class="sg-section" id="icon-system">
      <h2>Icon System</h2>
      <p>All module icons are minimal, geometric, line-based SVGs. Consistent: 20×20 viewport, 2px stroke, rounded caps and joins. They live inline in components and as standalone files in <code>src/icons/</code>. Each sits inside a <code>.module-card__icon</code> soft-square container that inherits color from <code>--module-color</code>.</p>

      <div class="sg-icon-grid" style="display:grid; grid-template-columns:repeat(auto-fill, minmax(120px, 1fr)); gap:1rem; margin:1.5rem 0 2rem;">
        <div class="sg-icon-item" style="display:flex; flex-direction:column; align-items:center; gap:0.5rem; padding:1rem; background:var(--surface-elevated); border:1px solid var(--border); border-radius:var(--radius-md);">
          <div style="width:2.25rem;height:2.25rem;border-radius:0.5rem;background:color-mix(in srgb,var(--module-compass) 18%,var(--surface));color:var(--module-compass);display:flex;align-items:center;justify-content:center;"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"/></svg></div>
          <span style="font-size:0.6875rem;color:var(--text-2);text-align:center;">compass</span>
        </div>
        <div class="sg-icon-item" style="display:flex; flex-direction:column; align-items:center; gap:0.5rem; padding:1rem; background:var(--surface-elevated); border:1px solid var(--border); border-radius:var(--radius-md);">
          <div style="width:2.25rem;height:2.25rem;border-radius:0.5rem;background:color-mix(in srgb,var(--module-library) 18%,var(--surface));color:var(--module-library);display:flex;align-items:center;justify-content:center;"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="4" height="18" rx="1"/><rect x="9" y="3" width="4" height="18" rx="1"/><path d="M15 5l4 14"/></svg></div>
          <span style="font-size:0.6875rem;color:var(--text-2);text-align:center;">library</span>
        </div>
        <div class="sg-icon-item" style="display:flex; flex-direction:column; align-items:center; gap:0.5rem; padding:1rem; background:var(--surface-elevated); border:1px solid var(--border); border-radius:var(--radius-md);">
          <div style="width:2.25rem;height:2.25rem;border-radius:0.5rem;background:color-mix(in srgb,var(--module-engine) 18%,var(--surface));color:var(--module-engine);display:flex;align-items:center;justify-content:center;"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg></div>
          <span style="font-size:0.6875rem;color:var(--text-2);text-align:center;">engine</span>
        </div>
        <div class="sg-icon-item" style="display:flex; flex-direction:column; align-items:center; gap:0.5rem; padding:1rem; background:var(--surface-elevated); border:1px solid var(--border); border-radius:var(--radius-md);">
          <div style="width:2.25rem;height:2.25rem;border-radius:0.5rem;background:color-mix(in srgb,var(--module-pipeline) 18%,var(--surface));color:var(--module-pipeline);display:flex;align-items:center;justify-content:center;"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/><circle cx="5" cy="12" r="2"/><circle cx="19" cy="12" r="2"/><circle cx="12" cy="5" r="2"/><circle cx="12" cy="19" r="2"/></svg></div>
          <span style="font-size:0.6875rem;color:var(--text-2);text-align:center;">pipeline</span>
        </div>
        <div class="sg-icon-item" style="display:flex; flex-direction:column; align-items:center; gap:0.5rem; padding:1rem; background:var(--surface-elevated); border:1px solid var(--border); border-radius:var(--radius-md);">
          <div style="width:2.25rem;height:2.25rem;border-radius:0.5rem;background:color-mix(in srgb,var(--module-piano) 18%,var(--surface));color:var(--module-piano);display:flex;align-items:center;justify-content:center;"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="5" width="20" height="14" rx="1"/><path d="M7 5v8M12 5v8M17 5v8"/><path d="M9.5 5v5M14.5 5v5"/></svg></div>
          <span style="font-size:0.6875rem;color:var(--text-2);text-align:center;">piano</span>
        </div>
        <div class="sg-icon-item" style="display:flex; flex-direction:column; align-items:center; gap:0.5rem; padding:1rem; background:var(--surface-elevated); border:1px solid var(--border); border-radius:var(--radius-md);">
          <div style="width:2.25rem;height:2.25rem;border-radius:0.5rem;background:color-mix(in srgb,var(--module-vocal) 18%,var(--surface));color:var(--module-vocal);display:flex;align-items:center;justify-content:center;"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="22"/></svg></div>
          <span style="font-size:0.6875rem;color:var(--text-2);text-align:center;">vocal</span>
        </div>
        <div class="sg-icon-item" style="display:flex; flex-direction:column; align-items:center; gap:0.5rem; padding:1rem; background:var(--surface-elevated); border:1px solid var(--border); border-radius:var(--radius-md);">
          <div style="width:2.25rem;height:2.25rem;border-radius:0.5rem;background:color-mix(in srgb,var(--module-songs) 18%,var(--surface));color:var(--module-songs);display:flex;align-items:center;justify-content:center;"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg></div>
          <span style="font-size:0.6875rem;color:var(--text-2);text-align:center;">songs</span>
        </div>
        <div class="sg-icon-item" style="display:flex; flex-direction:column; align-items:center; gap:0.5rem; padding:1rem; background:var(--surface-elevated); border:1px solid var(--border); border-radius:var(--radius-md);">
          <div style="width:2.25rem;height:2.25rem;border-radius:0.5rem;background:color-mix(in srgb,var(--module-staircase) 18%,var(--surface));color:var(--module-staircase);display:flex;align-items:center;justify-content:center;"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 19h4v-4h4v-4h4V7h4"/><path d="M3 19V5"/></svg></div>
          <span style="font-size:0.6875rem;color:var(--text-2);text-align:center;">staircase</span>
        </div>
      </div>

      <h3>Icon Conventions</h3>
      <ul>
        <li>Viewport: <code>0 0 24 24</code>, rendered at 20×20</li>
        <li>Stroke: <code>stroke-width="2"</code>, <code>stroke-linecap="round"</code>, <code>stroke-linejoin="round"</code></li>
        <li>No fills — line-only, geometric</li>
        <li>All icons carry <code>aria-hidden="true"</code> — label is on the card</li>
        <li>Color via <code>stroke="currentColor"</code> — inherits from the icon container</li>
        <li>Source files: <code>src/icons/*.svg</code></li>
      </ul>
    </div>

  </div>

</PortalLayout>

<style>
  /* Style guide specimen styles — scoped to this page only */
  .sg-color-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin: 1.25rem 0;
  }

  .sg-color-card {
    background: var(--surface);
    border-radius: var(--radius-md);
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    transition: all 0.2s ease;
  }
  .sg-color-card:hover {
    box-shadow: 0 4px 16px rgba(0,0,0,0.12);
    transform: translateY(-2px);
  }

  .sg-swatch {
    height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.7rem;
    font-weight: 700;
    letter-spacing: 0.06em;
    text-transform: uppercase;
  }

  .sg-color-info {
    padding: 12px 14px;
    display: flex;
    flex-direction: column;
    gap: 2px;
  }
  .sg-color-info strong {
    font-size: 0.875rem;
    color: var(--text);
  }
  .sg-color-info code {
    font-size: 0.75rem;
    color: var(--text-2);
    background: none;
    border: none;
    padding: 0;
    box-shadow: none;
    font-weight: 500;
  }
  .sg-color-info span {
    font-size: 0.75rem;
    color: var(--text-3);
    line-height: 1.4;
  }

  .sg-gradient-demo {
    height: 56px;
    border-radius: var(--radius-md);
    margin: 1rem 0;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 600;
    font-size: 0.85rem;
    letter-spacing: 0.02em;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    background: linear-gradient(90deg, #F59E0B, #14B8A6);
  }

  .sg-type-specimen {
    border-radius: var(--radius-md);
    padding: 1.25rem 1.5rem;
    margin: 1rem 0 0 0;
    background: var(--surface-elevated);
  }
  .sg-type-specimen h2 {
    border-bottom: none;
    padding-bottom: 0;
  }

  .sg-type-details {
    font-size: 0.85rem;
    color: var(--text-2);
    margin-bottom: 1.25rem;
    padding: 0.5rem 0 0.75rem;
    border-bottom: 1px dashed var(--border);
    line-height: 1.6;
  }
  .sg-type-details:last-of-type {
    border-bottom: none;
  }
  .sg-type-details strong {
    font-weight: 500;
    color: var(--text);
  }

  /* ===== DEPTH SCALE DEMO ===== */
  .sg-depth-strip {
    display: flex;
    gap: 2px;
    border-radius: var(--radius-md);
    overflow: hidden;
    margin: 1rem 0;
  }

  .sg-depth-swatch {
    flex: 1;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.7rem;
    font-weight: 700;
    letter-spacing: 0.04em;
    color: white;
    text-shadow: 0 1px 2px rgba(0,0,0,0.3);
  }

  /* ===== CHROME PROOF TABLE ===== */
  .chrome-proof-table {
    width: 100%;
    border-collapse: collapse;
    margin: 1rem 0 1.75rem;
    font-size: 0.85rem;
  }

  .chrome-proof-table th {
    text-align: left;
    padding: 0.625rem 0.75rem;
    font-weight: 600;
    font-size: 0.8rem;
    letter-spacing: 0.04em;
    text-transform: uppercase;
    color: var(--table-header-text);
    background: var(--table-header-bg);
    border-bottom: 2px solid var(--table-border);
  }

  .chrome-proof-table td {
    padding: 0.5rem 0.75rem;
    border-bottom: 1px solid var(--table-border);
    vertical-align: top;
  }

  .chrome-proof-table tbody tr:nth-child(even) {
    background: var(--table-row-alt);
  }

</style>

<script>
  // ===== TABS =====
  document.querySelectorAll('.tabs').forEach(tabGroup => {
    const tabs = tabGroup.querySelectorAll('[role="tab"]');
    const panels = tabGroup.querySelectorAll('[role="tabpanel"]');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => {
          t.setAttribute('aria-selected', 'false');
          t.setAttribute('tabindex', '-1');
        });
        panels.forEach(p => p.hidden = true);

        tab.setAttribute('aria-selected', 'true');
        tab.removeAttribute('tabindex');
        const panel = document.getElementById(tab.getAttribute('aria-controls'));
        if (panel) panel.hidden = false;
      });

      tab.addEventListener('keydown', (e) => {
        const tabsArray = Array.from(tabs);
        const index = tabsArray.indexOf(tab);
        let newIndex;

        if (e.key === 'ArrowRight') newIndex = (index + 1) % tabsArray.length;
        else if (e.key === 'ArrowLeft') newIndex = (index - 1 + tabsArray.length) % tabsArray.length;
        else return;

        e.preventDefault();
        tabsArray[newIndex].click();
        tabsArray[newIndex].focus();
      });
    });
  });

  // ===== ACCORDION EXPAND/COLLAPSE ALL =====
  document.querySelectorAll('.accordion-controls__btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const group = btn.dataset.accordionGroup;
      const action = btn.dataset.action;
      const items = document.querySelectorAll(`[data-accordion-group="${group}"] details`);
      items.forEach(d => d.open = action === 'expand');
    });
  });
</script>
