---
import PortalLayout from '../layouts/PortalLayout.astro';
import { getCategoryStats } from '../data/library.js';

const musicStats = getCategoryStats('music');
const storyStats = getCategoryStats('story');
const base = import.meta.env.BASE_URL;
---

<PortalLayout title="Home" currentPage="home">

  <!-- Hero — unchanged -->
  <div style="text-align:center; padding:3.5rem 0 3rem;">
    <div class="eyebrow eyebrow--amber" style="font-size:0.6875rem; letter-spacing:0.15em; text-transform:uppercase; font-weight:600; margin-bottom:1rem; color:var(--semantic-h);">
      CREATIVE FRAMEWORK PORTAL
    </div>
    <h1 style="margin-bottom:1rem;">Story <strong>&</strong> Music</h1>
    <p style="font-size:1.0625rem; color:var(--text-2); max-width:500px; margin:0 auto; line-height:1.6;">
      A coordinate system for navigating narrative structure, music theory, and the bridges between them.
    </p>
  </div>

  <!-- Live module cards — 3 col -->
  <div class="card-grid card-grid--3 animate-in" style="margin-bottom:2.5rem;">

    <a href={`${base}/compass/`} class="cat-card cat-card--gradient">
      <div class="cat-card__icon cat-card__icon--gradient">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"/></svg>
      </div>
      <div class="cat-card__title">Story Coordinate Compass</div>
      <div class="cat-card__count">8 sections · Complete framework</div>
    </a>

    <a href={`${base}/library/music/`} class="cat-card cat-card--amber">
      <div class="cat-card__icon cat-card__icon--amber">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>
      </div>
      <div class="cat-card__title">Music Library</div>
      <div class="cat-card__count">{musicStats.links} resources · {musicStats.pages} pages</div>
    </a>

    <a href={`${base}/library/story/`} class="cat-card cat-card--teal">
      <div class="cat-card__icon cat-card__icon--teal">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="M2 2l7.586 7.586"/><circle cx="11" cy="11" r="2"/></svg>
      </div>
      <div class="cat-card__title">Story Library</div>
      <div class="cat-card__count">{storyStats.links} resources · {storyStats.pages} pages</div>
    </a>

  </div>

  <!-- Coming soon modules — 2-col + 3-col rows -->
  <div class="card-grid card-grid--2 animate-in animate-in-1" style="margin-bottom:0.75rem;">

    <div class="coming-card">
      <div class="coming-card__badge">
        <span class="status-tag status-tag--coming">Coming Soon</span>
      </div>
      <div class="coming-card__icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg>
      </div>
      <div class="coming-card__title">Creativity Engine</div>
      <p class="coming-card__desc">Songwriting dashboard — generative tools for ideation and composition</p>
    </div>

    <div class="coming-card">
      <div class="coming-card__badge">
        <span class="status-tag status-tag--coming">Coming Soon</span>
      </div>
      <div class="coming-card__icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/><circle cx="5" cy="12" r="2"/><circle cx="19" cy="12" r="2"/><circle cx="12" cy="5" r="2"/><circle cx="12" cy="19" r="2"/></svg>
      </div>
      <div class="coming-card__title">Corpus → Opus Pipeline</div>
      <p class="coming-card__desc">Execution pipeline transforming raw material into finished works</p>
    </div>

  </div>

  <div class="card-grid card-grid--3 animate-in animate-in-2" style="margin-bottom:3rem;">

    <div class="coming-card">
      <div class="coming-card__badge">
        <span class="status-tag status-tag--coming">Coming Soon</span>
      </div>
      <div class="coming-card__icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="5" width="20" height="14" rx="1"/><path d="M7 5v8M12 5v8M17 5v8"/><path d="M9.5 5v5M14.5 5v5"/></svg>
      </div>
      <div class="coming-card__title">Piano Exercise Matrix</div>
      <p class="coming-card__desc">Exercises indexed by technique, key, and difficulty</p>
    </div>

    <div class="coming-card">
      <div class="coming-card__badge">
        <span class="status-tag status-tag--coming">Coming Soon</span>
      </div>
      <div class="coming-card__icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="22"/></svg>
      </div>
      <div class="coming-card__title">Vocal Exercise Matrix</div>
      <p class="coming-card__desc">Warm-ups mapped by range, register, and goal</p>
    </div>

    <div class="coming-card">
      <div class="coming-card__badge">
        <span class="status-tag status-tag--coming">Coming Soon</span>
      </div>
      <div class="coming-card__icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>
      </div>
      <div class="coming-card__title">Source of Truth: Songs</div>
      <p class="coming-card__desc">Master registry — lyrics, structure, versions, metadata</p>
    </div>

  </div>

  <!-- Staircase — full width coming soon -->
  <div class="card-grid animate-in animate-in-3" style="margin-bottom:3rem;">

    <div class="coming-card">
      <div class="coming-card__badge">
        <span class="status-tag status-tag--coming">Coming Soon</span>
      </div>
      <div class="coming-card__icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 19h4v-4h4v-4h4V7h4"/><path d="M3 19V5"/></svg>
      </div>
      <div class="coming-card__title">Staircase to My Biggest Why</div>
      <p class="coming-card__desc">Progressive framework for clarifying purpose, values, and long-range creative vision</p>
    </div>

  </div>

</PortalLayout>
