---
import PortalLayout from '../../layouts/PortalLayout.astro';
import CompassRail from '../../components/compass/CompassRail.astro';

const base = import.meta.env.BASE_URL;

const sections = [
  { num: "I", slug: "orientation", title: "Orientation", desc: "What the coordinate system does, how to navigate, relationship to supporting documents" },
  { num: "II", slug: "horizontal-axis", title: "Horizontal Axis", desc: "Story timeline position — clock positions, act structures, beat markers, symmetry points" },
  { num: "IIA", slug: "story-structure", title: "Story Structure", desc: "Detailed structural frameworks — Save the Cat, Hero's Journey, story grid integration" },
  { num: "III", slug: "vertical-axis", title: "Vertical Axis", desc: "Story depth dimensions — surface to core, 6 dimension layers of narrative analysis" },
  { num: "IV", slug: "intersection-logic", title: "Intersection Logic", desc: "How horizontal and vertical axes combine — coordinate reading, pattern recognition" },
  { num: "V", slug: "navigation-protocols", title: "Navigation Protocols", desc: "Movement patterns through the coordinate space — drilling, zooming, diagonal tracking" },
  { num: "VI", slug: "practical-application", title: "Practical Application", desc: "Real-world usage — analysis workflows, writing applications, teaching frameworks" },
  { num: "VII", slug: "implementation-guide", title: "Implementation Guide", desc: "Technical implementation — building tools, digital integration, scaling the system" },
];
---

<PortalLayout title="Story Coordinate Compass" currentPage="compass">

  <nav class="breadcrumb">
    <a href={`${base}/`}>Home</a>
    <span class="sep">›</span>
    <strong>Story Coordinate Compass</strong>
  </nav>

  <div class="page-hero page-hero--gradient page-hero--slim">
    <div class="eyebrow">FRAMEWORK</div>
    <h1>Story Coordinate Compass</h1>
  </div>

  <div class="cockpit">
    <div class="cockpit__main">

  <!-- Axis info -->
  <div style="background:var(--surface); border:1px solid var(--border); border-radius:var(--radius-lg); padding:1.5rem; margin-bottom:1.5rem;">
    <div style="display:flex; align-items:center; gap:0.75rem; margin-bottom:1rem;">
      <div style="width:8px; height:8px; border-radius:50%; background:linear-gradient(135deg, #F59E0B, #14B8A6);"></div>
      <span style="font-size:0.8125rem; font-weight:600; color:var(--text);">Coordinate System</span>
    </div>
    <div style="display:grid; grid-template-columns:1fr 1fr; gap:1rem;">
      <div class="axis-box axis-box--h">
          <a href={`${base}/compass/horizontal-axis/`} class="axis-box__link">
            <div class="axis-box__label axis-box__label--h">HORIZONTAL →</div>
            <p class="axis-box__text">Story Position / Timeline — where you are in the narrative arc</p>
          </a>
        </div>
        <div class="axis-box axis-box--v">
          <a href={`${base}/compass/vertical-axis/`} class="axis-box__link">
            <div class="axis-box__label axis-box__label--v">VERTICAL ↓</div>
            <p class="axis-box__text">Story Depth / Dimensions — how deep you analyze at any position</p>
          </a>
        </div>
    </div>
  </div>

  <!-- Section cards -->
  <div style="display:flex; flex-direction:column; gap:0.75rem; padding-bottom:3rem;">
    {sections.map(s => (
      <a href={`${base}/compass/${s.slug}/`} class="compass-card">
        <div class="compass-card__num">{s.num}</div>
        <div class="compass-card__body">
          <div class="compass-card__title">{s.title}</div>
          <div class="compass-card__desc">{s.desc}</div>
        </div>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:var(--text-3); margin-top:0.25rem; flex-shrink:0;"><polyline points="9 18 15 12 9 6"/></svg>
      </a>
    ))}
  </div>

    </div><!-- /.cockpit__main -->

    <CompassRail
      tocId="rail-toc-index"
      toc={[
        { label: "I. Orientation",         href: `${base}/compass/orientation/`          },
        { label: "II. Horizontal Axis",    href: `${base}/compass/horizontal-axis/`      },
        { label: "III. Vertical Axis",     href: `${base}/compass/vertical-axis/`        },
        { label: "IV. Intersection Logic", href: `${base}/compass/intersection-logic/`   },
        { label: "V. Navigation Protocols",href: `${base}/compass/navigation-protocols/` },
        { label: "VI. Practical App",      href: `${base}/compass/practical-application/`},
        { label: "VII. Implementation",    href: `${base}/compass/implementation-guide/` },
      ]}
      chips={[
        { label: "H", value: "Timeline Position" },
        { label: "V", value: "Depth D5 → D0"     },
      ]}
      visual="cross"
      nextLinks={[
        { label: "I. Orientation",      href: `${base}/compass/orientation/`     },
        { label: "II. Horizontal Axis", href: `${base}/compass/horizontal-axis/` },
        { label: "III. Vertical Axis",  href: `${base}/compass/vertical-axis/`   },
      ]}
    />

  </div><!-- /.cockpit -->
</PortalLayout>
